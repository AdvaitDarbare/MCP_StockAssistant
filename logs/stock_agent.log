INFO:     Will watch for changes in these directories: ['/Users/advaitdarbare/Desktop/ai-stock-assistant/backend']
INFO:     Uvicorn running on http://127.0.0.1:8020 (Press CTRL+C to quit)
INFO:     Started reloader process [50815] using WatchFiles
INFO:     Started server process [50820]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ğŸ”§ STOCK AGENT - Input received: '  Show me MSFT versus GOOGL'
ğŸ”§ Stock LLM Response: Here is the plan to execute your request:

{
  "tools_to_call": [
    {
      "tool": "get_multiple_quotes",
      "params": {
        "symbols": ["MSFT", "GOOGL"]
      }
    }
  ],
  "reasoning": "The user wants to compare the stock quotes for MSFT and GOOGL, so I will call the get_multiple_quotes tool with those two symbols."
}

This will provide a side-by-side comparison of the real-time stock quotes for Microsoft (MSFT) and Alphabet (GOOGL).
ğŸ”§ STOCK AGENT - Plan generated: {'tools_to_call': [{'tool': 'get_multiple_quotes', 'params': {'symbols': ['MSFT', 'GOOGL']}}], 'reasoning': 'The user wants to compare the stock quotes for MSFT and GOOGL, so I will call the get_multiple_quotes tool with those two symbols.'}
ğŸ”§ STOCK AGENT - Executing TOOL: get_multiple_quotes
   ğŸ“‹ Tool Description: ğŸ“Š Compare multiple stocks side-by-side with prices and changes
   âš™ï¸  Parameters: {'symbols': ['MSFT', 'GOOGL']}
   âœ… Tool completed successfully - Compared 2 stocks: ['MSFT', 'GOOGL']
ğŸ”§ STOCK AGENT - Final output length: 117 chars
ğŸ‰ STOCK AGENT - Successfully processed query using 1 tool(s)
INFO:     127.0.0.1:51874 - "POST /mcp HTTP/1.1" 200 OK
ğŸ”§ STOCK AGENT - Input received: '  Show me PLTR performance over the last 6 months'
ğŸ”§ Stock LLM Response: Here is the plan to execute your request:

{
  "tools_to_call": [
    {
      "tool": "get_price_history",
      "params": {
        "symbol": "PLTR",
        "period_type": "month",
        "period": 6,
        "frequency_type": "daily",
        "frequency": 1
      }
    }
  ],
  "reasoning": "The user wants to see the price history of PLTR stock over the last 6 months, so I will call the get_price_history tool with the appropriate parameters."
}

The key steps are:
1. Extracted the stock symbol "PLTR" from the request.
2. Determined the user wants to see the performance over the last 6 months, so set period_type to "month" and period to 6.
3. Specified the frequency_type as "daily" and frequency as 1 to get the daily price history.
4. Chose the get_price_history tool to retrieve the historical price data for PLTR.

This will provide the user with the detailed price performance of PLTR stock over the last 6 months.
ğŸ”§ STOCK AGENT - Plan generated: {'tools_to_call': [{'tool': 'get_price_history', 'params': {'symbol': 'PLTR', 'period_type': 'month', 'period': 6, 'frequency_type': 'daily', 'frequency': 1}}], 'reasoning': 'The user wants to see the price history of PLTR stock over the last 6 months, so I will call the get_price_history tool with the appropriate parameters.'}
ğŸ”§ STOCK AGENT - Executing TOOL: get_price_history
   ğŸ“‹ Tool Description: ğŸ“‰ Get historical price performance over time periods
   âš™ï¸  Parameters: {'symbol': 'PLTR', 'period_type': 'month', 'period': 6, 'frequency_type': 'daily', 'frequency': 1}
   âœ… Tool completed successfully - Got 6 month(s) history for PLTR
ğŸ”§ STOCK AGENT - Final output length: 153 chars
ğŸ‰ STOCK AGENT - Successfully processed query using 1 tool(s)
INFO:     127.0.0.1:51889 - "POST /mcp HTTP/1.1" 200 OK
ğŸ”§ STOCK AGENT - Input received: '  Show me today's top gainers'
ğŸ”§ Stock LLM Response: {
  "tools_to_call": [
    {
      "tool": "get_market_movers",
      "params": {
        "index": "NASDAQ",
        "sort": "PERCENT_CHANGE_UP",
        "frequency": 1
      }
    }
  ],
  "reasoning": "The user is requesting the top gainers in the NASDAQ market, so we will call the get_market_movers tool with the NASDAQ index, sorting by percent change up, and a frequency of 1 (to get the top results)."
}
ğŸ”§ STOCK AGENT - Plan generated: {'tools_to_call': [{'tool': 'get_market_movers', 'params': {'index': 'NASDAQ', 'sort': 'PERCENT_CHANGE_UP', 'frequency': 1}}], 'reasoning': 'The user is requesting the top gainers in the NASDAQ market, so we will call the get_market_movers tool with the NASDAQ index, sorting by percent change up, and a frequency of 1 (to get the top results).'}
ğŸ”§ STOCK AGENT - Executing TOOL: get_market_movers
   ğŸ“‹ Tool Description: ğŸš€ Get top gainers, losers, or most active stocks by volume
   âš™ï¸  Parameters: {'index': 'NASDAQ', 'sort': 'PERCENT_CHANGE_UP', 'frequency': 1}
   âœ… Tool completed successfully - Got 10 market movers from NASDAQ
ğŸ”§ STOCK AGENT - Final output length: 447 chars
ğŸ‰ STOCK AGENT - Successfully processed query using 1 tool(s)
INFO:     127.0.0.1:51897 - "POST /mcp HTTP/1.1" 200 OK
ğŸ”§ STOCK AGENT - Input received: '  Give me the most active stocks by volume'
ğŸ”§ Stock LLM Response: Here is the plan to execute your request for the most active stocks by volume:

{
  "tools_to_call": [
    {
      "tool": "get_market_movers",
      "params": {
        "index": "$SPX",
        "sort": "VOLUME",
        "frequency": 1
      }
    }
  ],
  "reasoning": "User wants the most active stocks by volume, so we will call the get_market_movers tool and sort by volume."
}

The key points are:

1. Use the get_market_movers tool to retrieve the top movers.
2. Set the index to $SPX to get the overall market data.
3. Sort the results by VOLUME to get the most active stocks.
4. Set the frequency to 1 to get the top results.

This will provide the user with the most actively traded stocks by volume across the overall market.
ğŸ”§ STOCK AGENT - Plan generated: {'tools_to_call': [{'tool': 'get_market_movers', 'params': {'index': '$SPX', 'sort': 'VOLUME', 'frequency': 1}}], 'reasoning': 'User wants the most active stocks by volume, so we will call the get_market_movers tool and sort by volume.'}
ğŸ”§ STOCK AGENT - Executing TOOL: get_market_movers
   ğŸ“‹ Tool Description: ğŸš€ Get top gainers, losers, or most active stocks by volume
   âš™ï¸  Parameters: {'index': '$SPX', 'sort': 'VOLUME', 'frequency': 1}
   âœ… Tool completed successfully - Got 10 market movers from $SPX
ğŸ”§ STOCK AGENT - Final output length: 453 chars
ğŸ‰ STOCK AGENT - Successfully processed query using 1 tool(s)
INFO:     127.0.0.1:51911 - "POST /mcp HTTP/1.1" 200 OK
ğŸ”§ STOCK AGENT - Input received: '  What are the market hours today?'
ğŸ”§ Stock LLM Response: Here is the plan to get the market hours for today:

{
  "tools_to_call": [
    {
      "tool": "get_market_hours",
      "params": {
        "markets": ["equity", "option"],
        "date": "today"
      }
    }
  ],
  "reasoning": "The user is requesting the market hours for today, so we will call the get_market_hours tool with the equity and option markets for the current date."
}

This will retrieve the trading schedules and market status for the equity and options markets for the current date.
ğŸ”§ STOCK AGENT - Plan generated: {'tools_to_call': [{'tool': 'get_market_hours', 'params': {'markets': ['equity', 'option'], 'date': 'today'}}], 'reasoning': 'The user is requesting the market hours for today, so we will call the get_market_hours tool with the equity and option markets for the current date.'}
ğŸ”§ STOCK AGENT - Executing TOOL: get_market_hours
   ğŸ“‹ Tool Description: ğŸ• Get trading schedules and market open/close status
   âš™ï¸  Parameters: {'markets': ['equity', 'option'], 'date': 'today'}
ğŸ”§ Calling get_market_hours with params: {'markets': ['equity', 'option'], 'date': 'today'}
âŒ Error fetching market hours: expected type 'datetime.date' for date, got 'builtins.str'
   âœ… Tool completed successfully - Got market hours for 2 market types
ğŸ”§ STOCK AGENT - Final output length: 138 chars
ğŸ‰ STOCK AGENT - Successfully processed query using 1 tool(s)
INFO:     127.0.0.1:51924 - "POST /mcp HTTP/1.1" 200 OK
ğŸ”§ STOCK AGENT - Input received: '  When does the market close?'
ğŸ”§ Stock LLM Response: {
  "tools_to_call": [
    {"tool": "get_market_hours", "params": {"markets": ["equity", "option"], "date": "today"}}
  ],
  "reasoning": "The user is asking about the market closing hours, so we need to call the get_market_hours tool to retrieve the trading schedule and market status for today."
}
ğŸ”§ STOCK AGENT - Plan generated: {'tools_to_call': [{'tool': 'get_market_hours', 'params': {'markets': ['equity', 'option'], 'date': 'today'}}], 'reasoning': 'The user is asking about the market closing hours, so we need to call the get_market_hours tool to retrieve the trading schedule and market status for today.'}
ğŸ”§ STOCK AGENT - Executing TOOL: get_market_hours
   ğŸ“‹ Tool Description: ğŸ• Get trading schedules and market open/close status
   âš™ï¸  Parameters: {'markets': ['equity', 'option'], 'date': 'today'}
ğŸ”§ Calling get_market_hours with params: {'markets': ['equity', 'option'], 'date': 'today'}
âŒ Error fetching market hours: expected type 'datetime.date' for date, got 'builtins.str'
   âœ… Tool completed successfully - Got market hours for 2 market types
ğŸ”§ STOCK AGENT - Final output length: 138 chars
ğŸ‰ STOCK AGENT - Successfully processed query using 1 tool(s)
INFO:     127.0.0.1:51936 - "POST /mcp HTTP/1.1" 200 OK
