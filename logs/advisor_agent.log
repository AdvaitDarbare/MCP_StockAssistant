INFO:     Will watch for changes in these directories: ['/Users/advaitdarbare/Desktop/ai-stock-assistant/backend']
INFO:     Uvicorn running on http://127.0.0.1:8003 (Press CTRL+C to quit)
INFO:     Started reloader process [17377] using WatchFiles
INFO:     Started server process [17394]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:53798 - "GET /docs HTTP/1.1" 200 OK
üéØ ADVISOR AGENT - Input received: 'Should I buy AAPL stock?'
üîç ADVISOR DEBUG - Analyzing query: 'Should I buy AAPL stock?'
üîç ADVISOR DEBUG - Calling Claude API for query analysis
üîç ADVISOR DEBUG - Claude API response received for analysis
üîç ADVISOR DEBUG - Analysis result: {'symbols': ['AAPL'], 'advice_type': 'buy_recommendation', 'data_needed': {'stock_data': True, 'equity_insights': True}}
üéØ ADVISOR AGENT - Analysis: {'symbols': ['AAPL'], 'advice_type': 'buy_recommendation', 'data_needed': {'stock_data': True, 'equity_insights': True}}
üîç ADVISOR DEBUG - Starting data gathering phase
üîç ADVISOR DEBUG - Adding stock task for AAPL
üîç ADVISOR DEBUG - Adding equity task for AAPL
üîç ADVISOR DEBUG - Total tasks to execute: 2
üîç ADVISOR DEBUG - Executing 2 tasks in parallel...
üîç ADVISOR DEBUG - Calling stock agent with query: 'Get current price, performance, and key metrics for AAPL'
üîç ADVISOR DEBUG - Making request to stock agent at localhost:8020
üîç ADVISOR DEBUG - Calling equity agent with query: 'Get analyst ratings, recent news, and company overview for AAPL'
üîç ADVISOR DEBUG - Making request to equity agent at localhost:8001
üîç ADVISOR DEBUG - Stock agent response status: 200
üîç ADVISOR DEBUG - Stock agent returned 155 chars
üîç ADVISOR DEBUG - Equity agent response status: 200
üîç ADVISOR DEBUG - Equity agent returned 3224 chars
üîç ADVISOR DEBUG - All tasks completed, processing results...
‚úÖ Got stock data: 155 chars
‚úÖ Got equity data: 3224 chars
üîç ADVISOR DEBUG - Generating investment advice...
üîç ADVISOR DEBUG - Entering advice generation with stock_data: 155 chars, equity_data: 3224 chars
üîç ADVISOR DEBUG - Calling Claude API for advice generation
üîç ADVISOR DEBUG - Claude API response received for advice
üîç ADVISOR DEBUG - Investment advice generated: 2250 chars
üéØ ADVISOR AGENT - Generated advice: 2455 chars
INFO:     127.0.0.1:53838 - "POST /mcp HTTP/1.1" 200 OK
üéØ ADVISOR AGENT - Input received: 'Should I sell my NVDA shares'
üîç ADVISOR DEBUG - Analyzing query: 'Should I sell my NVDA shares'
üîç ADVISOR DEBUG - Calling Claude API for query analysis
üîç ADVISOR DEBUG - Claude API response received for analysis
üîç ADVISOR DEBUG - Analysis result: {'symbols': ['NVDA'], 'advice_type': 'buy_recommendation', 'data_needed': {'stock_data': True, 'equity_insights': True}}
üéØ ADVISOR AGENT - Analysis: {'symbols': ['NVDA'], 'advice_type': 'buy_recommendation', 'data_needed': {'stock_data': True, 'equity_insights': True}}
üîç ADVISOR DEBUG - Starting data gathering phase
üîç ADVISOR DEBUG - Adding stock task for NVDA
üîç ADVISOR DEBUG - Adding equity task for NVDA
üîç ADVISOR DEBUG - Total tasks to execute: 2
üîç ADVISOR DEBUG - Executing 2 tasks in parallel...
üîç ADVISOR DEBUG - Calling stock agent with query: 'Get current price, performance, and key metrics for NVDA'
üîç ADVISOR DEBUG - Making request to stock agent at localhost:8020
üîç ADVISOR DEBUG - Calling equity agent with query: 'Get analyst ratings, recent news, and company overview for NVDA'
üîç ADVISOR DEBUG - Making request to equity agent at localhost:8001
üîç ADVISOR DEBUG - Stock agent response status: 200
üîç ADVISOR DEBUG - Stock agent returned 154 chars
üîç ADVISOR DEBUG - Equity agent response status: 200
üîç ADVISOR DEBUG - Equity agent returned 3236 chars
üîç ADVISOR DEBUG - All tasks completed, processing results...
‚úÖ Got stock data: 154 chars
‚úÖ Got equity data: 3236 chars
üîç ADVISOR DEBUG - Generating investment advice...
üîç ADVISOR DEBUG - Entering advice generation with stock_data: 154 chars, equity_data: 3236 chars
üîç ADVISOR DEBUG - Calling Claude API for advice generation
üîç ADVISOR DEBUG - Claude API response received for advice
üîç ADVISOR DEBUG - Investment advice generated: 2394 chars
üéØ ADVISOR AGENT - Generated advice: 2597 chars
INFO:     127.0.0.1:53951 - "POST /mcp HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/services/schwab_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [17394]
INFO:     Started server process [24248]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/agents/stock_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [24248]
INFO:     Started server process [24457]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/agents/stock_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [24457]
INFO:     Started server process [24663]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'setup_schwab_auth.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [24663]
INFO:     Started server process [25677]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/schwab_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [25677]
INFO:     Started server process [26881]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/agents/stock_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [26881]
INFO:     Started server process [27079]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/agents/stock_agent.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [27079]
INFO:     Started server process [27144]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'setup_schwab_auth.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [27144]
INFO:     Started server process [32403]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/schwab_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [32403]
INFO:     Started server process [33604]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/schwab_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [33604]
INFO:     Started server process [34458]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/schwab_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [34458]
INFO:     Started server process [34526]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/schwab_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [34526]
INFO:     Started server process [34680]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/schwab_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [34680]
INFO:     Started server process [34732]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/schwab_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [34732]
INFO:     Started server process [34908]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/schwab_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [34908]
INFO:     Started server process [35072]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'setup_schwab_auth.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [35072]
INFO:     Started server process [35737]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [35737]
INFO:     Started server process [44577]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/api/reddit.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [44577]
INFO:     Started server process [44978]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [44978]
INFO:     Started server process [45076]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [45076]
INFO:     Started server process [45222]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'test_reddit.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [45222]
INFO:     Started server process [49515]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client_mock.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [49515]
INFO:     Started server process [50248]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [50248]
INFO:     Started server process [50646]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [50646]
INFO:     Started server process [50710]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [50710]
INFO:     Started server process [50875]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [50875]
INFO:     Started server process [50932]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [50932]
INFO:     Started server process [51107]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [51107]
INFO:     Started server process [51161]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [51161]
INFO:     Started server process [51799]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [51799]
INFO:     Started server process [51978]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [51978]
INFO:     Started server process [52035]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [52035]
INFO:     Started server process [52088]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [52088]
INFO:     Started server process [52246]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [52246]
INFO:     Started server process [53740]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/reddit_client_mock.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [53740]
INFO:     Started server process [53918]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/api/reddit.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [53918]
INFO:     Started server process [64028]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/api/reddit.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [64028]
INFO:     Started server process [64091]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
üéØ ADVISOR AGENT - Input received: 'Should I buy NVDA stock?'
üîç ADVISOR DEBUG - Analyzing query: 'Should I buy NVDA stock?'
üîç ADVISOR DEBUG - Calling Claude API for query analysis
üîç ADVISOR DEBUG - Claude API response received for analysis
üîç ADVISOR DEBUG - Analysis result: {'symbols': ['NVDA'], 'advice_type': 'buy_recommendation', 'data_needed': {'stock_data': True, 'equity_insights': True}}
üéØ ADVISOR AGENT - Analysis: {'symbols': ['NVDA'], 'advice_type': 'buy_recommendation', 'data_needed': {'stock_data': True, 'equity_insights': True}}
üîç ADVISOR DEBUG - Starting data gathering phase
üîç ADVISOR DEBUG - Adding stock task for NVDA
üîç ADVISOR DEBUG - Adding equity task for NVDA
üîç ADVISOR DEBUG - Total tasks to execute: 2
üîç ADVISOR DEBUG - Executing 2 tasks in parallel...
üîç ADVISOR DEBUG - Calling stock agent with query: 'Get current price, performance, and key metrics for NVDA'
üîç ADVISOR DEBUG - Making request to stock agent at localhost:8020
üîç ADVISOR DEBUG - Calling equity agent with query: 'Get analyst ratings, recent news, and company overview for NVDA'
üîç ADVISOR DEBUG - Making request to equity agent at localhost:8001
üîç ADVISOR DEBUG - Stock agent response status: 200
üîç ADVISOR DEBUG - Stock agent returned 220 chars
üîç ADVISOR DEBUG - Equity agent response status: 200
üîç ADVISOR DEBUG - Equity agent returned 3228 chars
üîç ADVISOR DEBUG - All tasks completed, processing results...
‚úÖ Got stock data: 220 chars
‚úÖ Got equity data: 3228 chars
üîç ADVISOR DEBUG - Generating investment advice...
üîç ADVISOR DEBUG - Entering advice generation with stock_data: 220 chars, equity_data: 3228 chars
üîç ADVISOR DEBUG - Calling Claude API for advice generation
üîç ADVISOR DEBUG - Claude API response received for advice
üîç ADVISOR DEBUG - Investment advice generated: 2549 chars
üéØ ADVISOR AGENT - Generated advice: 2754 chars
INFO:     127.0.0.1:58545 - "POST /mcp HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [64091]
INFO:     Stopping reloader process [17377]
