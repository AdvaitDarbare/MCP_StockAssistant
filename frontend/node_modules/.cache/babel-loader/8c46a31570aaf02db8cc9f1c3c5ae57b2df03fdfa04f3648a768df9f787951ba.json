{"ast":null,"code":"const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:2024';\nexport class ApiError extends Error {\n  constructor(message, status) {\n    super(message);\n    this.status = status;\n    this.name = 'ApiError';\n  }\n}\nexport async function sendMessage(message) {\n  try {\n    const response = await fetch(`${API_BASE_URL}/runs`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        input: {\n          input: message\n        },\n        config: {\n          configurable: {\n            thread_id: \"thread_1\"\n          }\n        }\n      })\n    });\n    if (!response.ok) {\n      throw new ApiError(`HTTP error! status: ${response.status}`, response.status);\n    }\n    const data = await response.json();\n\n    // Extract the final output from the LangGraph response\n    if (data.output) {\n      return data.output;\n    }\n\n    // If no direct output, try to find it in the response structure\n    if (data && typeof data === 'object') {\n      // Look for common response patterns\n      const possibleOutputs = [data.result, data.response, data.message];\n      for (const output of possibleOutputs) {\n        if (typeof output === 'string' && output.trim()) {\n          return output;\n        }\n      }\n    }\n    return 'No response received';\n  } catch (error) {\n    if (error instanceof ApiError) {\n      throw error;\n    }\n\n    // Network or other errors\n    if (error instanceof TypeError && error.message.includes('fetch')) {\n      throw new ApiError('Unable to connect to the AI Stock Assistant. Please make sure the server is running.');\n    }\n    throw new ApiError('An unexpected error occurred while processing your request.');\n  }\n}","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","ApiError","Error","constructor","message","status","name","sendMessage","response","fetch","method","headers","body","JSON","stringify","input","config","configurable","thread_id","ok","data","json","output","possibleOutputs","result","trim","error","TypeError","includes"],"sources":["/Users/advaitdarbare/Desktop/ai-stock-assistant/frontend/src/utils/api.ts"],"sourcesContent":["import { ApiResponse } from '../types';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:2024';\n\nexport class ApiError extends Error {\n  constructor(message: string, public status?: number) {\n    super(message);\n    this.name = 'ApiError';\n  }\n}\n\nexport async function sendMessage(message: string): Promise<string> {\n  try {\n    const response = await fetch(`${API_BASE_URL}/runs`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        input: {\n          input: message\n        },\n        config: {\n          configurable: {\n            thread_id: \"thread_1\"\n          }\n        }\n      }),\n    });\n\n    if (!response.ok) {\n      throw new ApiError(`HTTP error! status: ${response.status}`, response.status);\n    }\n\n    const data = await response.json();\n    \n    // Extract the final output from the LangGraph response\n    if (data.output) {\n      return data.output;\n    }\n    \n    // If no direct output, try to find it in the response structure\n    if (data && typeof data === 'object') {\n      // Look for common response patterns\n      const possibleOutputs = [data.result, data.response, data.message];\n      for (const output of possibleOutputs) {\n        if (typeof output === 'string' && output.trim()) {\n          return output;\n        }\n      }\n    }\n\n    return 'No response received';\n  } catch (error) {\n    if (error instanceof ApiError) {\n      throw error;\n    }\n    \n    // Network or other errors\n    if (error instanceof TypeError && error.message.includes('fetch')) {\n      throw new ApiError('Unable to connect to the AI Stock Assistant. Please make sure the server is running.');\n    }\n    \n    throw new ApiError('An unexpected error occurred while processing your request.');\n  }\n}"],"mappings":"AAEA,MAAMA,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;AAE7E,OAAO,MAAMC,QAAQ,SAASC,KAAK,CAAC;EAClCC,WAAWA,CAACC,OAAe,EAASC,MAAe,EAAE;IACnD,KAAK,CAACD,OAAO,CAAC;IAAC,KADmBC,MAAe,GAAfA,MAAe;IAEjD,IAAI,CAACC,IAAI,GAAG,UAAU;EACxB;AACF;AAEA,OAAO,eAAeC,WAAWA,CAACH,OAAe,EAAmB;EAClE,IAAI;IACF,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGZ,YAAY,OAAO,EAAE;MACnDa,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACnBC,KAAK,EAAE;UACLA,KAAK,EAAEX;QACT,CAAC;QACDY,MAAM,EAAE;UACNC,YAAY,EAAE;YACZC,SAAS,EAAE;UACb;QACF;MACF,CAAC;IACH,CAAC,CAAC;IAEF,IAAI,CAACV,QAAQ,CAACW,EAAE,EAAE;MAChB,MAAM,IAAIlB,QAAQ,CAAC,uBAAuBO,QAAQ,CAACH,MAAM,EAAE,EAAEG,QAAQ,CAACH,MAAM,CAAC;IAC/E;IAEA,MAAMe,IAAI,GAAG,MAAMZ,QAAQ,CAACa,IAAI,CAAC,CAAC;;IAElC;IACA,IAAID,IAAI,CAACE,MAAM,EAAE;MACf,OAAOF,IAAI,CAACE,MAAM;IACpB;;IAEA;IACA,IAAIF,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;MACpC;MACA,MAAMG,eAAe,GAAG,CAACH,IAAI,CAACI,MAAM,EAAEJ,IAAI,CAACZ,QAAQ,EAAEY,IAAI,CAAChB,OAAO,CAAC;MAClE,KAAK,MAAMkB,MAAM,IAAIC,eAAe,EAAE;QACpC,IAAI,OAAOD,MAAM,KAAK,QAAQ,IAAIA,MAAM,CAACG,IAAI,CAAC,CAAC,EAAE;UAC/C,OAAOH,MAAM;QACf;MACF;IACF;IAEA,OAAO,sBAAsB;EAC/B,CAAC,CAAC,OAAOI,KAAK,EAAE;IACd,IAAIA,KAAK,YAAYzB,QAAQ,EAAE;MAC7B,MAAMyB,KAAK;IACb;;IAEA;IACA,IAAIA,KAAK,YAAYC,SAAS,IAAID,KAAK,CAACtB,OAAO,CAACwB,QAAQ,CAAC,OAAO,CAAC,EAAE;MACjE,MAAM,IAAI3B,QAAQ,CAAC,sFAAsF,CAAC;IAC5G;IAEA,MAAM,IAAIA,QAAQ,CAAC,6DAA6D,CAAC;EACnF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}